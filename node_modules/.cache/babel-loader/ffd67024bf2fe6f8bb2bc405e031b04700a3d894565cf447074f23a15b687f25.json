{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ace malto/OneDrive/Desktop/dsadsa/react-crud-firebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ace malto/OneDrive/Desktop/dsadsa/react-crud-firebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ace malto/OneDrive/Desktop/dsadsa/react-crud-firebase/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{getDoc,updateDoc,doc}from'firebase/firestore';import{database}from'../firebase/firebase';// import { async } from '@firebase/util'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=function Edit(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),description=_useState2[0],setDescription=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),stock=_useState4[0],setStock=_useState4[1];var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var update=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var product,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();product=doc(database,\"products\",id);data={description:description,stock:stock};_context.next=5;return updateDoc(product,data);case 5:navigate('/');case 6:case\"end\":return _context.stop();}},_callee);}));return function update(_x){return _ref.apply(this,arguments);};}();var getProductById=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var product;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getDoc(doc(database,\"products\",id));case 2:product=_context2.sent;if(product.exists()){//console.log(product.data())\nsetDescription(product.data().description);setStock(product.data().stock);}else{console.log('NO product exist');}case 4:case\"end\":return _context2.stop();}},_callee2);}));return function getProductById(_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){getProductById(id);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Product\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:update,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{value:description,onChange:function onChange(e){return setDescription(e.target.value);},type:\"text\",className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Stock\"}),/*#__PURE__*/_jsx(\"input\",{value:stock,onChange:function onChange(e){return setStock(e.target.value);},type:\"number\",className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update\"})]})]})})});};export default Edit;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","getDoc","updateDoc","doc","database","Edit","description","setDescription","stock","setStock","navigate","id","update","e","preventDefault","product","data","getProductById","exists","console","log","target","value"],"sources":["C:/Users/ace malto/OneDrive/Desktop/dsadsa/react-crud-firebase/src/components/Edit.js"],"sourcesContent":["import React from 'react'\r\nimport { useEffect, useState } from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { getDoc, updateDoc, doc } from 'firebase/firestore'\r\nimport { database } from '../firebase/firebase'\r\n// import { async } from '@firebase/util'\r\n\r\n\r\nconst Edit = () => {\r\n    const [ description, setDescription] = useState('')\r\n    const [ stock, setStock ] = useState(0)\r\n    const navigate = useNavigate()\r\n    const {id} = useParams()\r\n\r\n    const update = async (e) => {\r\n        e.preventDefault()\r\n        const product = doc(database, \"products\", id)\r\n        const data = {description: description, stock: stock}\r\n        await updateDoc(product, data)\r\n        navigate('/')\r\n    }\r\n\r\n    const getProductById = async (id) => {\r\n        const product = await getDoc( doc(database, \"products\", id) )\r\n        if(product.exists()) {\r\n            //console.log(product.data())\r\n            setDescription(product.data().description)    \r\n            setStock(product.data().stock)\r\n        }else{\r\n            console.log('NO product exist')\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getProductById(id)\r\n    }, [])\r\n\r\n    return (\r\n        <div className='container'>\r\n        <div className='row'>\r\n            <div className='col'>\r\n                <h1>Edit Product</h1>\r\n                 <form onSubmit={update}>\r\n                    <div className='mb-3'>\r\n                        <label className='form-label'>Description</label>\r\n                        <input\r\n                            value={description}\r\n                            onChange={ (e) => setDescription(e.target.value)} \r\n                            type=\"text\"\r\n                            className='form-control'\r\n                        />\r\n                    </div>  \r\n\r\n                    <div className='mb-3'>\r\n                        <label className='form-label'>Stock</label>\r\n                        <input\r\n                            value={stock}\r\n                            onChange={ (e)=> setStock(e.target.value)} \r\n                            type=\"number\"\r\n                            className='form-control'\r\n                        />                 \r\n                    </div>  \r\n                    <button type='submit' className='btn btn-primary'>Update</button>\r\n                 </form>   \r\n            </div>\r\n        </div>\r\n    </div> \r\n    )\r\n}\r\n\r\nexport default Edit"],"mappings":"4cAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,OAASC,MAAM,CAAEC,SAAS,CAAEC,GAAG,KAAQ,oBAAoB,CAC3D,OAASC,QAAQ,KAAQ,sBAAsB,CAC/C;AAAA,wFAGA,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACf,cAAuCP,QAAQ,CAAC,EAAE,CAAC,wCAA3CQ,WAAW,eAAEC,cAAc,eACnC,eAA4BT,QAAQ,CAAC,CAAC,CAAC,yCAA/BU,KAAK,eAAEC,QAAQ,eACvB,GAAMC,SAAQ,CAAGX,WAAW,EAAE,CAC9B,eAAaC,SAAS,EAAE,CAAjBW,EAAE,YAAFA,EAAE,CAET,GAAMC,OAAM,4FAAG,iBAAOC,CAAC,oIACnBA,CAAC,CAACC,cAAc,EAAE,CACZC,OAAO,CAAGZ,GAAG,CAACC,QAAQ,CAAE,UAAU,CAAEO,EAAE,CAAC,CACvCK,IAAI,CAAG,CAACV,WAAW,CAAEA,WAAW,CAAEE,KAAK,CAAEA,KAAK,CAAC,uBAC/CN,UAAS,CAACa,OAAO,CAAEC,IAAI,CAAC,QAC9BN,QAAQ,CAAC,GAAG,CAAC,sDAChB,kBANKE,OAAM,4CAMX,CAED,GAAMK,eAAc,6FAAG,kBAAON,EAAE,0JACNV,OAAM,CAAEE,GAAG,CAACC,QAAQ,CAAE,UAAU,CAAEO,EAAE,CAAC,CAAE,QAAvDI,OAAO,gBACb,GAAGA,OAAO,CAACG,MAAM,EAAE,CAAE,CACjB;AACAX,cAAc,CAACQ,OAAO,CAACC,IAAI,EAAE,CAACV,WAAW,CAAC,CAC1CG,QAAQ,CAACM,OAAO,CAACC,IAAI,EAAE,CAACR,KAAK,CAAC,CAClC,CAAC,IAAI,CACDW,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC,CACnC,CAAC,uDACJ,kBATKH,eAAc,8CASnB,CAEDpB,SAAS,CAAC,UAAM,CACZoB,cAAc,CAACN,EAAE,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACI,YAAK,SAAS,CAAC,WAAW,uBAC1B,YAAK,SAAS,CAAC,KAAK,uBAChB,aAAK,SAAS,CAAC,KAAK,wBAChB,oBAAI,cAAY,EAAK,cACpB,cAAM,QAAQ,CAAEC,MAAO,wBACpB,aAAK,SAAS,CAAC,MAAM,wBACjB,cAAO,SAAS,CAAC,YAAY,UAAC,aAAW,EAAQ,cACjD,cACI,KAAK,CAAEN,WAAY,CACnB,QAAQ,CAAG,kBAACO,CAAC,QAAKN,eAAc,CAACM,CAAC,CAACQ,MAAM,CAACC,KAAK,CAAC,EAAC,CACjD,IAAI,CAAC,MAAM,CACX,SAAS,CAAC,cAAc,EAC1B,GACA,cAEN,aAAK,SAAS,CAAC,MAAM,wBACjB,cAAO,SAAS,CAAC,YAAY,UAAC,OAAK,EAAQ,cAC3C,cACI,KAAK,CAAEd,KAAM,CACb,QAAQ,CAAG,kBAACK,CAAC,QAAIJ,SAAQ,CAACI,CAAC,CAACQ,MAAM,CAACC,KAAK,CAAC,EAAC,CAC1C,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,cAAc,EAC1B,GACA,cACN,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,iBAAiB,UAAC,QAAM,EAAS,GAC7D,GACN,EACJ,EACJ,CAEV,CAAC,CAED,cAAejB,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}